{% extends "base.twig" %}

{% block body %}
    <h1>{{ order.formattedId }}</h1>
    <div class="container">
        <div class="row">
            <p class="col-xs-6 col-sm-6">
                <b>Customer</b>
                <a href="{{ route('customer.show', order.customer) }}">
                    {{ order.customer.company_name }}
                </a>
            </p>
        </div>
        <div class="row">
            <p class="col-xs-3 col-sm-3">
                <b>Type</b> {{ order.orderType.name }}
            </p>
            <p class="col-xs-3 col-sm-3">
                <b>Status</b> {{ order.orderStatus.name }}
            </p>
            {% if order.requested_at is not null %}
                <p class="col-xs-6 col-sm-6">
                    <b>Requested shipping date</b>{{ order.requested_at }}
                </p>
            {% endif %}
        </div>
        <a href="{{ route('order.edit', order) }}" class="btn btn-default">Edit</a>
    </div>
    <h2>Order elements</h2>
    <div class="container">
        {% for productType, diopters in orderElements %}
            <h4>{{ productType }}</h4>
            {% for sph, elements in diopters %}
                <h5><b>Diopter</b> {{ sph }}</h5>
                <div class="row">
                    {% for item in elements %}
                        <p class="col-xs-6 col-sm-6">
                            <b>Assigned lens</b>
                            {% if element.lens is not null %}
                                {{ element.lens.sn }}
                            {% else %}
                                No lens assigned yet
                            {% endif %}
                        </p>
                    {% endfor %}
                </div>
            {% endfor %}
        {% endfor %}
    </div>
    <a href="{{ route('order.index', 'opened') }}" class="btn btn-default">Back</a>
{% endblock %}
